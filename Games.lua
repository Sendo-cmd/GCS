Games = {
    [5578556129] = { --Anime-Vanguards
        -- ["SukonoAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Boss_SukonoAuto.lua",
        -- ["BEIgrisAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Boss_IGSAuto.lua",
        -- ["BaseGem"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_GEM.lua",
        -- ["GMe"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_GEMME.lua",
        -- ["BaseGemDD"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_GEMDD.lua",
        -- ["BaseGemInf"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_GEMINF.lua",
        -- ["IgrisAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_IGRIS_Auto.lua",
        -- ["ESSE"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Essence.lua",
        -- ["ESSEN"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_EssenceN.lua",
        -- ["ESSE2"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Essence2.lua",
        -- ["BaseCF"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_CF.lua",
        -- ["Reroll"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Trait.lua",
        -- ["RerollSuper"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_TraitSuper.lua",
        -- ["Webs"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Raid.lua",
        -- ["DioAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_DioAuto.lua",
        -- ["Portal"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Portal.lua",
        -- ["SaberAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_SaberAuto.lua",
        -- ["Saber"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Saber.lua",
        -- ["SokoraAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_SokoraAuto.lua",
        -- ["Saber2"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Saber3.lua",
        -- ["Sokora"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Saber2.lua",
        -- ["Sokora2"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Sokora.lua",
        -- ["Sokora3"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Sokora2.lua",
        -- ["Sokora4"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Sokora3.lua",
        -- ["YomomataCh"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_YomomataCh.lua",
        -- ["YomomataG"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_YomomataG.lua",
        -- ["YomomataV"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_YomomataV.lua",
        -- ["YomomataR"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_YomomataR.lua",
        -- ["YomomataAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_YomomataAuto.lua",
        -- ["KeyG"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_KeyGilgamesh.lua",
        -- ["KeyGAuto"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_KeyGilgameshAuto.lua",
        -- ["Worldline"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Worldline.lua",
        -- ["Dungeon"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_DungAnt.lua",
        -- ["Dungeons"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_DungAnts.lua",
        -- ["Dragon"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Dragon.lua",
        -- ["DragonP"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_DragonP.lua",
        -- ["Cid"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_CID.lua",
        -- ["CdT1"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_CIDT1.lua",
        -- ["CdT2"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_CIDT2.lua",
        -- ["CidP"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_CIDP.lua",
        -- ["Byeken"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Byeken.lua",
        -- ["ByekenP"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_ByekenP.lua",
        -- ["Lfelt"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Lfelt.lua",
        -- ["Eren"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Eren.lua",
        -- ["BBounties"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_BBounties.lua",
        -- ["Rift"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Rift.lua",
        -- ["Marco"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Marco.lua",
        ["Log"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/logs_av.lua",
        ["System"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_System.lua",
        ["System2"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_System2.lua",
        ["Base"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Base.lua",
        -- ["AutoBuyR"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Shop_R.lua",
        -- ["AutoBuyBE"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/AV_Shop_BE.lua",
    },
    [4509896324] = { --Anime-Last-Stand
        ["Log"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ALS_Log.lua",
        ["System"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ALS_Base.lua",
    },
    [6884266247] = { --Anime Rangers X
        ["Log"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ARX_Log.lua",
        ["System"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ARX_System.lua",
    },
    -- [6057699512] = { --All Star Tower Defense X
    --     ["Log"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Log.lua",
    --     ["System"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_System.lua",
    --     ["Marco"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Marco.lua",
    --     ["Inf"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Inf.lua",
    --     ["Lvl"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_lvl.lua",
    --     ["Challenge"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Cha.lua",
    --     ["ChallengeEx"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Cha_Expert.lua",
    --     ["Story"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Story.lua",
    --     ["Tdw"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Trial_DW.lua",
    --     ["Tdw2"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Trial_DW2.lua",
    --     ["Tzk"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Trial2_Zk.lua",
    --     ["Tsp"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Trial3_SP.lua",
    --     ["dg"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/ASTDX_Dung.lua",

    -- },
    [5750914919] = { --Fisch
        ["System"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/Fisch_System.lua",
        ["Log"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/Fisch_Log.lua",
    },
    [7750955984] = { --Hz
        ["System"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/HZ_System.lua",
        ["Log"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/HZ_Log.lua",
    },
    [7671049560] = { --TF
        ["System"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/TF_System.lua",
        ["Log"] = "https://raw.githubusercontent.com/Sendo-cmd/GCS/main/TF_Log.lua",
    },
}
Accounts = {}
repeat task.wait(1) until game:IsLoaded(2)

local plr = game.Players.LocalPlayer
local Scripts = Games[game.gameId]
local Loaded = false
local Timer = 0
local ScriptLists = nil

local BaseScripts = {
    ["5578556129"] = { "Log", "Base", "System", "System2" },
    -- ["6057699512"] = { "Marco", "Tsp" },
    ["5750914919"] = { "Log", "System" },
    ["6884266247"] = { "Log", "System" },
    ["4509896324"] = { "System" },
    ["7750955984"] = { "Log", "System" },
    ["7671049560"] = { "Log", "System" },
}

for i, v in pairs(Accounts) do
    if i == plr.Name or i:lower() == plr.Name:lower() then
        ScriptLists = v
        break
    end
end

if not ScriptLists then
    ScriptLists = BaseScripts[tostring(game.gameId)] or {}
end

local isGuitarKingLobby = false
if game.PlaceId == 16146832113 then
    pcall(function()
        local HttpService = game:GetService("HttpService")
        local response = request({
            ["Url"] = "https://api.championshop.date/api/v1/shop/orders/" .. plr.Name,
            ["Method"] = "GET",
            ["Headers"] = {
                ["content-type"] = "application/json",
                ["x-api-key"] = "953a582c-fca0-47bb-8a4c-a9d28d0871d4"
            },
        })
        if response and response["Body"] then
            local data = HttpService:JSONDecode(response["Body"])["data"]
            if data and data[1] and data[1]["product"] then
                local productName = data[1]["product"]["name"] or ""
                if string.find(productName:lower(), "guitar") or string.find(productName:lower(), "king") then
                    isGuitarKingLobby = true
                    print("[Games] Guitar King order detected at Lobby - skipping some scripts")
                end
            end
        end
    end)
end

for i, v in pairs(ScriptLists) do
    -- ถ้าเป็น Guitar King ที่ Lobby ให้ข้าม Base (script ที่ลบปุ่ม)
    if isGuitarKingLobby and v == "Base" then
        print("[Games] Skipping Base script for Guitar King")
        continue
    end
    
    local ScriptUrl = Scripts[v]

    print(ScriptUrl)
    local ok, Functions = pcall(loadstring, game:HttpGet(ScriptUrl))

    if ok then
        Timer, Loaded = tick(), false
        task.spawn(function()
            Functions()
            Loaded = true
        end)

        repeat task.wait() until Loaded or (tick() - Timer) > 2
    end
end

